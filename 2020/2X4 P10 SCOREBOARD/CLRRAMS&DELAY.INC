
ORG 0XFD00
;==========	DELAY USEC =========
DELAY_US

	MOVWF	DELAYUS

USEC

	NOP
 	NOP
	NOP
	NOP
DECFSZ	DELAYUS,F

GOTO	USEC

RETURN
;=================================



;=========== DELAY ONE MS ========
DELAY_ONEMS

	MOVLW	.5
	MOVWF	LOOP

MSEC
	MOVLW	.200
	CALL	DELAY_US
	DECFSZ	LOOP,F
	GOTO	MSEC

RETURN
;==================================


;=========== DELAY MS	==========
DELAY_MS
	
	MOVWF	DELAYMS
MSEC0
	CALL	DELAY_ONEMS
	DECFSZ	DELAYMS,F
	GOTO	MSEC0
RETURN
;=================================

;=========== DELAY	ONE	SECOND ===
DELAY_ONESEC

	MOVLW	.5
	MOVWF	SEC
SEC0
	MOVLW	.200
	CALL	DELAY_MS
	DECFSZ	SEC,F
	GOTO	SEC0
RETURN
;=================================

;==========	DELAY SEC ============
DELAY_SEC

	MOVWF	DELAYS
SEC1
	CALL	DELAY_ONESEC
	DECFSZ	DELAYS,F
	GOTO	SEC1
RETURN
;=================================


;=====================	CLEAR	DRAM0		===================
CLR_DRAM0
	MOVLB		0X01	;BANK2
	MOVLW		0XFF
	MOVWF		POINTER

	MOVLW		0X02
	MOVWF		FSR0H,0

	MOVLW		0X00
	MOVWF		FSR0L,0  

	MOVLW		0XFF

CLR_DRAM0A
	MOVWF		INDF0

	INCF		FSR0L
	DECFSZ		POINTER, F
	GOTO		CLR_DRAM0A
	MOVWF		INDF0
	
RETURN
;==============================================================


;=====================	CLEAR	DRAM1		===================
CLR_DRAM1
	MOVLB		0X01	;BANK2
	MOVLW		0XFF
	MOVWF		POINTER

	MOVLW		0X03
	MOVWF		FSR0H,0

	MOVLW		0X00
	MOVWF		FSR0L,0  

	MOVLW		0XFF

CLR_DRAM1A
	MOVWF		INDF0

	INCF		FSR0L
	DECFSZ		POINTER, F
	GOTO		CLR_DRAM1A
	MOVWF		INDF0
	
RETURN
;==============================================================

;=======================	CLEAR	TEMP	RAM		===========
CLR_TEMPRAM
	MOVLB		0X01	;BANK2
	MOVLW		0X3F
	MOVWF		POINTER

	MOVLW		0X01
	MOVWF		FSR0H,0

	MOVLW		0X20
	MOVWF		FSR0L,0  

	MOVLW		0XFF

CLR_TRAM0
	MOVWF		INDF0

	INCF		FSR0L
	DECFSZ		POINTER, F
	GOTO		CLR_TRAM0
	MOVWF		INDF0
	
	RETURN
;==============================================================

;=============	CLEAR	TEMPRAM	CURRENTLY SCANNED	===========
CLR_TEMPRAMSCAN
	MOVLB		0X01	;BANK2
	MOVLW		0X04
	MOVWF		POINTER

	MOVLW		0X01
	MOVWF		FSR0H,0

	MOVLW		0X20
	MOVWF		FSR0L,0  

	MOVFF		LINESCAN,WREG
	ADDWF		FSR0L




CLR_TRAMS0
	MOVLW		0XFF
	MOVWF		INDF0
	INCF		FSR0L


	MOVWF		INDF0
	INCF		FSR0L

	MOVWF		INDF0
	INCF		FSR0L

	MOVWF		INDF0

	MOVLW		0X0D
	ADDWF		FSR0L

	DECFSZ		POINTER, F
	GOTO		CLR_TRAMS0
	MOVWF		INDF0
	
	RETURN
;==============================================================

ORG 0XFE00
;==========	CLEAR	DRAM0 CURRENTLY SCANNED	===================
CLR_DRAM0SCAN
	MOVLB		0X01	;BANK2


	MOVLW		0X02
	MOVWF		FSR0H,0

	MOVLW		0X08 
	MOVWF		COUNT2




	MOVLW	0
	MOVWF	PCLATU,0
	MOVLW	0XFE
	MOVWF	PCLATH,0


	MOVFF		LINESCAN,WREG
	
	ADDWF	PCL
	GOTO	CD0S11
	GOTO	CD0S00
	GOTO	CD0S10
	GOTO	CD0S01

CD0S00
	MOVLW		0X18
	MOVWF		FSR0L,0
	GOTO		CLR_DRAM0SCAN1

CD0S10
	MOVLW		0X10
	MOVWF		FSR0L,0
	GOTO		CLR_DRAM0SCAN1

CD0S01
	MOVLW		0X08
	MOVWF		FSR0L,0
	GOTO		CLR_DRAM0SCAN1
CD0S11
	MOVLW		0X00
	MOVWF		FSR0L,0
	GOTO		CLR_DRAM0SCAN1
NOP
	
CLR_DRAM0SCAN1

	MOVLW		0X08
	MOVWF		POINTER



CLR_DRAM0SCAN2
	MOVLW		0XFF
	MOVWF		INDF0

	INCF		FSR0L
	DECFSZ		POINTER,F
	GOTO		CLR_DRAM0SCAN2
	
	MOVLW		0X18
	ADDWF		FSR0L
	DECFSZ		COUNT2,F
	GOTO		CLR_DRAM0SCAN1
	
RETURN
;==============================================================


ORG 0XFF00
;==========	CLEAR	DRAM1 CURRENTLY SCANNED	===================
CLR_DRAM1SCAN
	MOVLB		0X01	;BANK2


	MOVLW		0X03
	MOVWF		FSR0H,0

	MOVLW		0X08 
	MOVWF		COUNT2




	MOVLW	0
	MOVWF	PCLATU,0
	MOVLW	0XFF
	MOVWF	PCLATH,0


	MOVFF		LINESCAN,WREG
	
	ADDWF	PCL
	GOTO	CD1S11
	GOTO	CD1S00
	GOTO	CD1S10
	GOTO	CD1S01

CD1S00
	MOVLW		0X18
	MOVWF		FSR0L,0
	GOTO		CLR_DRAM1SCAN1

CD1S10
	MOVLW		0X10
	MOVWF		FSR0L,0
	GOTO		CLR_DRAM1SCAN1

CD1S01
	MOVLW		0X08
	MOVWF		FSR0L,0
	GOTO		CLR_DRAM1SCAN1
CD1S11
	MOVLW		0X00
	MOVWF		FSR0L,0
	GOTO		CLR_DRAM1SCAN1
NOP
	
CLR_DRAM1SCAN1

	MOVLW		0X08
	MOVWF		POINTER



CLR_DRAM1SCAN2
	MOVLW		0XFF
	MOVWF		INDF0

	INCF		FSR0L
	DECFSZ		POINTER,F
	GOTO		CLR_DRAM1SCAN2
	
	MOVLW		0X18
	ADDWF		FSR0L
	DECFSZ		COUNT2,F
	GOTO		CLR_DRAM1SCAN1
	
RETURN
;==============================================================